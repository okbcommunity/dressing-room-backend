// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================================================
// Models
// ============================================================================

model Bear {
  id         String       @id @default(uuid())
  number     Int          @unique
  public_key String?      @unique
  traits     Bear_Trait[]
}

// https://www.prisma.io/docs/concepts/components/prisma-schema/relations/many-to-many-relations
model Bear_Trait {
  bear     Bear   @relation(fields: [bear_id], references: [id])
  bear_id  String
  trait    Trait  @relation(fields: [trait_id], references: [id])
  trait_id String

  @@id([bear_id, trait_id])
}

model Category {
  id         String   @id @default(uuid())
  name       String
  weight     Int
  traits     Trait[]
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

model Trait {
  id                      String       @id @default(uuid())
  name                    String
  category_id             String
  category                Category     @relation(fields: [category_id], references: [id])
  image_url_webp          String?
  image_url_png_2000x2000 String?
  image_url_png_512x512   String?
  bears                   Bear_Trait[]
  created_at              DateTime     @default(now())
  updated_at              DateTime     @updatedAt
}
